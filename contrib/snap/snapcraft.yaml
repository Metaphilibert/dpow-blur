name: blur
version: 0.1.8.2
summary: "Blur Network: The private cryptocurrency (https://blur.cash)"
description: |
    BLUR is a private & untraceable cryptocurrency based on the cryptonote protocol.
    The Blur Network consists of individuals mining independently on CPUs, without
    the need for specialized hardware. Join the Fight for Financial Freedom.  
grade: stable
confinement: strict

apps:
    blurd:
        command: |
          blurd-wrapper --data-dir ${HOME}/.blur-net
        plugs:
            - network
            - network-bind
    blur-wallet-rpc:
        command: |
          blur-wallet-rpc --log-file ${SNAP_USER_DATA}
        plugs:
            - home
            - network
            - network-bind
    blur-wallet-cli:
        command: |
          blur-wallet-cli --log-file ${SNAP_USER_DATA}
        plugs:
            - home
            - network

parts:
    cmake-build:
        plugin: cmake
        configflags:
            - -DCMAKE_BUILD_TYPE=release
            - -DBUILD_TESTS=OFF
            - -DARCH=default
        source: .
        build-packages:
            - gcc
            - pkg-config
            - libunbound-dev
            - libboost-all-dev
            - liblzma-dev
            - libldns-dev
            - libzmq3-dev
            - libpgm-dev
            - libsodium-dev
        stage-packages:
            - libunbound2
            - libreadline7
            - libssl1.1
            - libcrypto1.1
            - libboost-serialization1.65.1
            - libboost-chrono1.65.1
            - libboost-system1.65.1
            - libboost-thread1.65.1
            - libboost-locale1.65.1
            - libboost-atomic1.65.1
            - libboost-filesystem1.65.1
            - libboost-program-options1.65.1
            - libboost-regex1.65.1
            - libzmq5-dev
            - libsodium23
            - libstdc++6
            - libgcc1
        prime:
            - bin
            - usr/lib/
            - -usr/lib/gcc
            - -usr/share

    dist-files:
        plugin: dump
        source: .
        organize:
            contrib/snap/blurd.conf: etc/blurd.conf
            contrib/snap/blurd-wrapper: bin/blurd-wrapper
        prime:
            - etc
            - bin

